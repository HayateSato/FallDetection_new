# =============================================================================
# ACCELEROMETER SENSOR CONFIGURATION
# =============================================================================
# Sensor type determines which field names to use in InfluxDB:
#   - bosch: Uses bosch_acc_x, bosch_acc_y, bosch_acc_z
#   - non_bosch: Uses acc_x, acc_y, acc_z
ACC_SENSOR_TYPE=bosch

# =============================================================================
# SAMPLING RATE CONFIGURATION
# =============================================================================
# Hardware accelerometer sampling rate in Hz: 25, 50, or 100
#   - 25: Data is upsampled to 50Hz for model (uses linear interpolation)
#   - 50: No resampling needed (model's native rate)
#   - 100: Data is downsampled to 50Hz for model
HARDWARE_ACC_SAMPLE_RATE=25

# Resampling method:
#   - For upsampling (25Hz -> 50Hz): 'linear' (recommended), 'cubic', 'nearest'
#   - For downsampling (100Hz -> 50Hz): 'decimate', 'average'
RESAMPLING_METHOD=linear

# Barometer sampling rate in Hz
BAROMETER_SAMPLING_RATE=25

# =============================================================================
# BAROMETER CONFIGURATION
# =============================================================================
# Barometer is automatically disabled for V0 model (ACC-only model).
# For other models (V1-V5), barometer is enabled by default.
# Uncomment below to manually override:
# BAROMETER_ENABLED=true

# Barometer field name in InfluxDB
BAROMETER_FIELD=pressure_in_pa

# =============================================================================
# MODEL SELECTION
# =============================================================================
# Choose which fall detection model to use.
# Options:
#   - v0: ACC only (no barometer) - 16 features [USE FOR 25Hz or 100Hz testing]
#   - v1: ACC (statistical) + BARO (dual-path EMA) - 22 features
#   - v2: ACC (paper magnitude) + BARO (paper slope-limit) - 10 features
#   - v3: ACC (statistical) + BARO (paper slope-limit) - 20 features [RECOMMENDED for 50Hz]
#   - v4: ACC (paper magnitude) + BARO (dual-path EMA) - 12 features
#   - v5: Raw features (minimal preprocessing) - 22 features
#   - v1_tuned, v3_tuned: Tuned versions with optimized hyperparameters
MODEL_VERSION=v0

# Optional: Override the default model file path
# MODEL_PATH=model_training/model_v3/model_v3_xgboost.pkl

# =============================================================================
# DATA SOURCE SELECTION
# =============================================================================
# Choose data source: "influx" or "csv"
DATA_SOURCE=influx

# CSV Data Source Settings (used when DATA_SOURCE=csv)
# Path to the CSV file for validation 
# (use CSV format exported by SmarKo app, not flaskapp!!)
CSV_FILE_PATH=C:\Users\HayateSato\Documents\6G\FD_ACCBARO\results\fall_data_exports\20260120\SmarkoApp_csv\AIDAPT_100hz_nonBosch_Daria_FALL.csv

# Interval in seconds between sliding windows when processing CSV
# e.g., 1.0 means windows start every 1 second
CSV_WINDOW_INTERVAL_SECONDS=1.0


# =============================================================================
# INFLUXDB CONFIGURATION
# =============================================================================
INFLUXDB_URL=https://your-influxdb-url:8086
INFLUXDB_TOKEN=your-token-here
INFLUXDB_ORG=your-org
INFLUXDB_BUCKET=your-bucket

# # Local InfluxDB (Docker) - run: docker-compose up -d
# INFLUXDB_URL=http://localhost:8086
# INFLUXDB_TOKEN=local-dev-token-fall-detection-2024
# INFLUXDB_ORG=fall-detection
# INFLUXDB_BUCKET=fd_test

# Continuous Monitoring Settings
# Enable/disable automatic fall detection monitoring
MONITORING_ENABLED=true

# How often to check for falls (in seconds)
MONITORING_INTERVAL_SECONDS=3

# How far back to look for sensor data (in seconds)
MONITORING_LOOKBACK_SECONDS=15


# =============================================================================
# PREPROCESSING METHODS (Reference Only)
# =============================================================================
# Preprocessing is automatically selected based on MODEL_VERSION above.
# No manual configuration needed - just change MODEL_VERSION.
#
# Model -> Preprocessing mapping:
#   v0:            ACC (v1_features: statistical) only, no barometer
#   v1:[DISABLED]  ACC (v1_features: statistical) + BARO (v1_ema: dual-path EMA)  
#   v2:[DISABLED]  ACC (v2_paper: magnitude+events) + BARO (v2_paper: slope-limit)
#   v3:            ACC (v1_features: statistical) + BARO (v2_paper: slope-limit) 
#   v4:[DISABLED]  ACC (v2_paper: magnitude+events) + BARO (v1_ema: dual-path EMA)
#   v5:[DISABLED]  ACC (raw) + BARO (raw)


# =============================================================================
# PUBLIC ENDPOINT CONFIGURATION
# =============================================================================
# Enable public endpoint mode (authentication + rate limiting)
PUBLIC_ENDPOINT_ENABLED=true

# Tunnel mode: how to expose the service
#   - local:      No tunnel, Flask runs on localhost only (for development)
#   - ngrok:      Use ngrok tunnel (requires ngrok installed + auth token)
#   - cloudflare: Use Cloudflare Tunnel (requires cloudflared installed)
TUNNEL_MODE=cloudflare

# API Keys (comma-separated). Share these with your partners.
# Generate new keys: python -c "import secrets; print(secrets.token_urlsafe(32))"
API_KEYS=G508N-Z3Y4Vcds4awadPSMiBdNs5AQrKwhFzKKgJH6w

# Rate limit: max requests per minute per IP
RATE_LIMIT_PER_MINUTE=30

# CORS allowed origins (* for all, or comma-separated list)
CORS_ALLOWED_ORIGINS=*

# --- ngrok-specific settings ---
NGROK_REGION=eu

# --- Cloudflare-specific settings ---
# For quick tunnels (no account needed), leave CLOUDFLARE_TUNNEL_TOKEN empty.
# For named tunnels (persistent URL), set your tunnel token from:
#   https://one.dash.cloudflare.com -> Zero Trust -> Networks -> Tunnels
# IMPORTANT: This is a CLOUDFLARE tunnel token, NOT your API key!
# Leave empty for quick tunnels (temporary *.trycloudflare.com URL)
# Only set this if you create a named tunnel via Cloudflare dashboard
CLOUDFLARE_TUNNEL_TOKEN=


# =============================================================================
# FLASK app CONFIGURATION
# =============================================================================

# Debug mode (automatically disabled when PUBLIC_ENDPOINT_ENABLED=true)
FLASK_DEBUG=false

FLASK_PORT = 8000

# Notification mode for the frontend fall alert popup:
#   - sse:     Server-Sent Events (real-time, works on localhost, may NOT work via Cloudflare)
#   - polling: Frontend polls server every N seconds (works everywhere, slight delay) --> Use this if you use Cloudflare Tunnel, as SSE may not work properly through Cloudflare
NOTIFICATION_MODE=polling

# Polling interval in seconds (only used when NOTIFICATION_MODE=polling)
POLLING_INTERVAL_SECONDS=3

# Fall Data Export Settings
# Enable/disable CSV export of fall detection data
FALL_DATA_EXPORT_ENABLED=true

# Directory where fall detection CSVs will be saved
# Can be absolute path or relative to project root
FALL_DATA_EXPORT_DIR=results/

# Additional Sensor Data Collection
# When true: Collects all available sensors (IMU + heart rate, air pressure, etc.)
# When false: Collects only IMU data (accelerometer and gyroscope)
COLLECT_ADDITIONAL_SENSORS=false

# Timezone Configuration
# Offset in hours from UTC for CSV filenames and timestamps
# Examples: 2 for CEST (UTC+2), 1 for CET (UTC+1), 0 for UTC, -5 for EST (UTC-5)
TIMEZONE_OFFSET_HOURS=2